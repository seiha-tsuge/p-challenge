# 課題6

## 課題1

### 問題1

## 任意課題

### 凝集度

凝集度とは、モジュールの要素がどの程度そのモジュールに収まっているかの度合いを指す。言い換えれば、凝集度とはモジュール内の要素同士の関連度を示す指標。関連する要素が全て一箇所にまとまっている状態が、凝集したモジュールの理想。まとまりをそれよりも細かくしてしまうと、モジュール間の呼び出しによって要素を結合しないと、有益な結果が得られなくなってしまう。

#### 偶発的凝集

モジュール内の要素は、同じソースファイル内にある以外には関連性がない。これは最も最悪な形での凝集を表している。

``` Scala
fun main() {
    val data = getData() // データの取得
    println("Hello World") // 出力
    calcPrimeNumber(10) // 素数の計算
}
```

- 適当（無作為）に集められたものがモジュールとなっている
- モジュール内の各部分には特に関連性はない

#### 論理的凝集

モジュール内のデータは論理的に関連しているものの、機能的には関連していない。たとえば、テキストやシリアライズされたオブジェクト、またはストリームを情報へ変換するモジュールを考えてみよう。この場合、これらは操作の上では関連があるものの、機能はまったく異なる。この種の凝集の典型的な例が、ほぼすべてのJavaプロジェクトに存在するStringUtilsクラスだ。ほとんどの場合、StringUtilsクラスは、Stringを操作するということでは関連しているものの、互いには関連していない静的メソッドの集まりだ。

``` Scala
fun sample(isA: Boolean) {
    if (isA) {
        sampleA()
    } else {
        sampleB()
    }
}
```

- 論理的に似たようなことをするものを集めたモジュール
- 例えば：フラグによって動作を変える

#### 時間的凝集

モジュール間に時間的な依存関係がある。たとえば、多くのシステムには、システム起動時に初期化しなければならない一見無関係な処理群が存在している。これらの異なる処理には時間的な凝集があるといえる。

``` Scala
// 初期化処理
fun initApp(isA: Boolean) {
    initConfig() // 設定の初期化
    initLogger() // Loggerの初期化
    initDB() // DBの初期化処理
}
```

- 時間的に近く動作するものを集めたモジュール
- 実行順序を入れ替えても動作する
- 例えば：初期化処理や、UIのファグラウンド時の処理など

#### 手続き的凝集（手順的凝集）

2つのモジュールは、特定の順序でコードを実行する必要がある。

``` Scala
// アクセス権を確認してファイルに書き込む
fun outputFile(file: File) {
    checkPermission() // 権限確認
    writeFile(file) // ファイル出力
}
```

- 順番に実行する必要があるものを集めたモジュール
- 共通したデータは使わない
- 例えば：アクセス権を確認してファイルに書き込む

#### 通信的凝集

2つのモジュールが通信の連鎖を形成し、それぞれの情報を操作したり、何らかの出力に貢献したりする。たとえば、データベースにレコードを追加し、その情報に基づいて電子メールを生成するといった具合だ。

``` Scala
// 変更をABCに通知する
funchangeAll(data: Data) {
    changeA(data)
    changeB(data)
    changeC(data)
}
```

- 同じデータを扱う部分を集めたモジュール

#### 逐次的凝集

一方が出力したデータを、もう一方が入力とする形で、2つのモジュールが相互に作用している。

``` Scala
fun sample() {
    val file = getFile() // ファイルを取得する
    val transfromed = transform(file) // ファイルを変更する
    saveFile(transfromed) // ファイルを保存する
}
```

- ある部分の出力が別の部分の入力となるような部分を集めたモジュール
- 例えば：ファイルを取得して変換して保存する

#### 機能的凝集

関連する要素だけでモジュールが構成され、モジュールが機能するために必要不可欠なものがすべて含まれている。

``` Scala
// 2点間の距離を計算する
func calcLength(a: Point, b: Point): Int {
    val dx = a.x - b.x
    val dy = a.y - b.y
    val length = aqrt(dx * dx + dy + dy)
    return length.toInt()
}
```

- 単一に定義されたタスクを実現するモジュール
- 例えば：2点間の距離を計算する

### 結合度

モジュール間で、呼び出し関係にあるメソッドの結び付きの強さを表す指標。結合度が高くなると複数のモジュール間で依存度が上がってしまうため、保守やメンテナンス、仕様変更などの対応がしづらくなる。また、設計的な観点からしても、複雑で分かりづらいものになってしまう。

#### 内部結合

#### 共通結合

#### 外部結合

#### 制御結合

#### スタンプ結合

#### データ結合

#### メッセージ結合
