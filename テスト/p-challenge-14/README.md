# 課題 14

## 課題 1

### 問題 1

**メリット**

- テストコードがあるため、安心してコーティングやリファクタリングができ、開発者の心理的負担を減らすことができる
- テストコードを書きやすい設計を意識して進める結果、凝集度が高く結合度が低い設計を行うようになる

**デメリット**

- テストコードを書くことで開発・保守コストが膨らむ
  - テストコードがあることで保守が容易になり、将来発生するコストを減らすことはできる
- テストしやすいソースコードを書けるスキルがなければ難しい
  - 熟練者だけが集まるチームで無ければ、教育コストがかかる

### 問題 2

#### 三点測量

三角測量とは、三角形の原理を利用して離れた地点との距離を計測する手法のことである。

> ある 2 点間の正確な距離が分かっている場合、その 2 点から離れた場所のある地点との距離は、その 2 点との角度が分かれば「三角形の一辺とその両端角が分かれば三角形が確定する」という性質によって確定することができます  
> [三次元計測の話 (1．三角測量)](https://www.kurabo.co.jp/el/room/3d/page1.html)

つまり、2 点間の正確な距離と、測量したい点との 2 点間の角度が分かれば、測量したい点までの距離を計算できる。

![image1-0000_waifu2x_art_noise1_tta_1](https://user-images.githubusercontent.com/49358142/146507189-ccf837f1-1b06-417e-b02f-8a95102e46d9.png)

図 1.1 「[三次元計測の話 (1．三角測量)](https://www.kurabo.co.jp/el/room/3d/page1.html)」からの引用

TDD では、この三角測量を真似て、2 つ以上のテストケースを利用してそれらの共通点を探すように、複数のテストケースの抽象化の助けとすることを指す。

[三角測量](https://d.hatena.ne.jp/keyword/%E4%B8%89%E8%A7%92%E6%B8%AC%E9%87%8F)

#### レッド・グリーン・リファクタリング

**レッド**  
仕様に対して失敗するテストコードを書く。
このステップでは、実装する機能の要件を適切な粒度に分けて、どんなテストが必要になるかを明らかにする。

**グリーン**  
機能の実装を行う。このステップでは、先に書いたテストコードのテスト条件を全てパスできる最小限の（可能な限りシンプルな）コードを書く。

**リファクタリング**  
テストを全て成功（グリーンの状態に）させたら、次はリファクタリングを行いコードの可読性を高める。

<img src="https://user-images.githubusercontent.com/49358142/146364189-51305afb-384f-4dcc-a046-0b71499e7133.png" width="480">

図 1. 「テスト駆動開発（TDD）とは？目的や種類、メリット・デメリットまで徹底解説」からの引用

[テスト駆動開発（Test-driven development）について超ザックリまとめてみた](https://esthersoftware.hatenablog.com/entry/what-is-test-driven-development)  
[テスト駆動開発（TDD）とは？目的や種類、メリット・デメリットまで徹底解説](https://service.shiftinc.jp/column/4654/)

#### 仮実装

以下の手順を踏んで実装していく手法

> 1. 小さいテストを 1 つ書く。
> 2. すべてのテストを実行し、1 つ失敗することを確認する。
> 3. 小さい変更を行う。
> 4. 再びテストを実行し、すべて成功することを確認する。
> 5. リファクタリングを行い、重複を除去する。
>
> Kent Beck(著), 和田卓人(翻訳) (2017 年)． テスト駆動開発，30 ページ

## 課題 2

足し算

- [ ] 1 と 2 を引数に渡し計算結果の 3 が返却される
- [ ] 引数を 30 個受け取れる
- [ ] 引数を 31 個受け取った場合エラー
- [ ] 引数が数字以外だとエラー
- [ ] 計算結果が 1000 を超える場合は「too big」と文字列が返却される
- [ ] 計算結果が 1000 の時は 1000 が返却される

引き算

- [ ] 3 と 2 を引数に渡し計算結果の 1 が返却される
- [ ] 引数を 30 個受け取れる
- [ ] 引数を 31 個受け取った場合エラー
- [ ] 引数が数字以外だとエラー
- [ ] 計算結果が マイナスの場合は「negative number」と文字列が返却される
- [ ] 計算結果が 0 の時は 0 が返却される

掛け算

- [ ] 2 と 2 を引数に渡し計算結果の 4 が返却される
- [ ] 引数を 30 個受け取れる
- [ ] 引数を 31 個受け取った場合エラー
- [ ] 引数が数字以外だとエラー
- [ ] 計算結果が 1000 を超える場合は「big big number」と文字列が返却される
- [ ] 計算結果が 1000 の時は 1000 が返却される

割り算

- [ ] 6 と 2 を引数に渡し計算結果の 3 が返却される
- [ ] 引数を 30 個受け取れる
- [ ] 引数を 31 個受け取った場合エラー
- [ ] 引数が数字以外だとエラー
